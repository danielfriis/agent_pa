# Keep localhost for reverse-proxy setups. For direct remote access set 0.0.0.0.
APP_HOST=127.0.0.1
APP_PORT=8787
# Optional public URL used when generating workspace file download links.
# APP_PUBLIC_BASE_URL=https://agent.example.com
TERMINAL_CHAT=true
CHAT_MODEL=openai/gpt-5-mini
CHAT_SESSION_TITLE_PREFIX=Terminal chat
AGENT_WORKSPACE_DIR=./agent_workspace
AGENT_DEFAULTS_DIR=./agent_defaults
AGENT_STATE_DIR=./agent_state
# Legacy alias for AGENT_STATE_DIR (prefer AGENT_STATE_DIR moving forward).
# AGENT_CONFIG_DIR=./agent_state
MEMORY_MAX_CHARS=6000

# Where local session metadata is stored.
STORE_DIR=./agent_state/sessions

# Optional per-session transcript logs (JSONL, one file per session).
SESSION_LOG_ENABLED=false
SESSION_LOG_DIR=./agent_state/session_logs
SESSION_LOG_MAX_CHARS=2000
# Include the injected system prompt in transcript entries (can contain memory/system content).
SESSION_LOG_INCLUDE_SYSTEM=false

# OpenCode server base URL used by this runtime shell.
OPENCODE_SERVER_URL=http://127.0.0.1:4096
OPENCODE_SERVER_HOST=127.0.0.1
OPENCODE_SERVER_PORT=4096
OPENCODE_DIRECTORY=./agent_workspace
OPENCODE_SERVER_USERNAME=opencode
# OPENCODE_SERVER_PASSWORD=
# Timeout for upstream OpenCode HTTP requests. 0 means no timeout (allow long-running tasks).
OPENCODE_REQUEST_TIMEOUT_MS=0

# Start `opencode serve` automatically when this app starts.
AUTOSTART_OPENCODE=true
# Enable OpenCode hosted web search for non-OpenCode model providers (for example OpenAI).
OPENCODE_ENABLE_EXA=true

# Shared chat update command (available in terminal/API/SMS chat channels)
UPDATE_COMMAND_ENABLED=true
UPDATE_SCRIPT_PATH=./deploy/update-server.sh
UPDATE_STATUS_FILE=./agent_state/maintenance/update-status.json
UPDATE_COMMAND_TIMEOUT_MS=1200000
UPDATE_COMMAND_MAX_OUTPUT_CHARS=12000

# API auth for remote deployments.
# If APP_API_TOKEN is set and APP_REQUIRE_AUTH is omitted, auth is enabled automatically.
APP_REQUIRE_AUTH=false
# APP_API_TOKEN=
APP_ALLOW_UNAUTHENTICATED_HEALTH=true

# Provider credentials. Keep in local .env (gitignored), not in source files.
# OPENAI_API_KEY=

# SMS channel (provider-agnostic route with Twilio adapter)
SMS_ENABLED=false
SMS_PROVIDER=twilio
SMS_INBOUND_PATH=/channels/sms/inbound
SMS_ALLOW_UNAUTHENTICATED_INBOUND=true
SMS_MAX_REPLY_CHARS=320
# Optional: add [1/N] labels on multipart SMS replies for visible ordering hints.
SMS_INCLUDE_SEQUENCE_LABELS=false
# Optional: when >0, send multipart replies via Twilio API with this delay between chunks (ms).
# Requires SMS_TWILIO_VALIDATE_SIGNATURE=true.
SMS_REPLY_MESSAGE_DELAY_MS=250
# SMS_DEFAULT_SYSTEM_PROMPT=You are replying to a user over SMS. Access to all tools and skills remains available; SMS only changes response formatting. Respond with plain text only and keep it concise.
# SMS_UNAUTHORIZED_REPLY=This phone number is not authorized to use this SMS channel.
# SMS_FALLBACK_REPLY=I hit an error processing that. Please try again shortly.

# Twilio adapter settings
# SMS_TWILIO_AUTH_TOKEN=your_twilio_auth_token
# Optional multi-account map (pick one format):
# SMS_TWILIO_AUTH_TOKENS=ACxxxxxxxx:token1,ACyyyyyyyy:token2
# SMS_TWILIO_AUTH_TOKENS_JSON={"ACxxxxxxxx":"token1","ACyyyyyyyy":"token2"}
# SMS_TWILIO_VALIDATE_SIGNATURE=true
# SMS_TWILIO_WEBHOOK_BASE_URL=https://your-public-host.example
# SMS_TWILIO_ALLOWED_TO_NUMBERS=+15551234567,+15557654321
# SMS_TWILIO_ALLOWED_FROM_NUMBERS=+15550001111
